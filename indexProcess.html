%%[

/* Define master variables */
VAR @id, @Agent_Code, @SubscriberKey, @email, @IsBKG__C, @IsWFG__C, @IsTAN__C, @first_name, @last_name, @contact_state, @product_lines__C, @sub_product_lines__C, @audience_segment, @Insurance_Email_Pref__c, @License_Status, @SMU_OptIn, @SMU_EntrySource

/* Set master variables */
SET @id = AttributeValue("id")
SET @email = AttributeValue("email")
SET @IsBKG__C = AttributeValue("IsBKG__C")
SET @IsWFG__C = AttributeValue("IsWFG__C")
SET @IsTAN__C = AttributeValue("IsTAN__C")
SET @first_name = AttributeValue("first_name")
SET @last_name = AttributeValue("last_name")
SET @contact_state = AttributeValue("contact_state")
SET @product_lines__C = AttributeValue("product_lines__C")
SET @sub_product_lines__C = AttributeValue("sub_product_lines__C")
SET @audience_segment = AttributeValue("audience_segment")
SET @Insurance_Email_Pref__c = AttributeValue("Insurance_Email_Pref__c")
SET @License_Status = AttributeValue("License_Status")
SET @SMU_OptIn = RequestParameter("SMU_OptIn")
SET @SMU_EntrySource = RequestParameter("SMU_EntrySource")
SET @SubscriberKey = AttributeValue("id")
SET @Agent_Code = AttributeValue("Agent_Code")

]%%

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.101.0">
    <title>Cloud Page Personalization | Sample</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      @media (min-width: 992px) {
        .rounded-lg-3 { border-radius: .3rem; }
      }
    </style>
  </head>
  <body>
  
  %%[
    SET @ok = RequestParameter("ok")
    SET @error = RequestParameter("error")
    SET @message = RequestParameter("message")
  ]%%
    
<main>

  <div class="b-example-divider"></div>

  <div class="container col-xl-10 col-xxl-8 px-4 py-5">
    <div class="row align-items-center g-lg-5 py-5">
      <div class="col-lg-7 text-center text-lg-start">
        <h1 class="display-4 fw-bold lh-1 mb-3">Social Media University Sign Up</h1>
        <p class="col-lg-10 fs-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque eget odio eget neque vestibulum vulputate. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Proin faucibus velit vitae tempus faucibus.</p>
      </div>
      <div class="col-md-10 mx-auto col-lg-5">

        <form class="p-4 p-md-5 border rounded-3 bg-light needs-validation" novalidate action="https://pages.transamerica.com/parameter-handle" method="post" enctype="application/x-www-form-urlencoded">
        %%[ IF EMPTY(@ok) AND EMPTY(@error) THEN ]%%
            <input type="hidden" class="form-control" name="id" value="%%=v(@id)=%%">
            <input type="hidden" class="form-control" name="SubscriberKey" value="%%=v(@SubscriberKey)=%%">
            <input type="hidden" class="form-control" name="IsBKG__C" value="%%=v(@IsBKG__C)=%%">
            <input type="hidden" class="form-control" name="IsWFG__C" value="%%=v(@IsWFG__C)=%%">
            <input type="hidden" class="form-control" name="IsTAN__C" value="%%=v(@IsTAN__C)=%%">
            <input type="hidden" class="form-control" name="contact_state" value="%%=v(@contact_state)=%%">
            <input type="hidden" class="form-control" name="product_lines__C" value="%%=v(@product_lines__C)=%%">
            <input type="hidden" class="form-control" name="sub_product_lines__C" value="%%=v(@sub_product_lines__C)=%%">
            <input type="hidden" class="form-control" name="audience_segment" value="%%=v(@audience_segment)=%%">
            <input type="hidden" class="form-control" name="Insurance_Email_Pref__c" value="%%=v(@Insurance_Email_Pref__c)=%%">
            <input type="hidden" class="form-control" name="License_Status" value="%%=v(@License_Status)=%%">
            <input type="hidden" class="form-control" name="SMU_OptIn" value="%%=v(@SMU_OptIn)=%%">
            <input type="hidden" class="form-control" name="SMU_EntrySource" value="%%=v(@SMU_EntrySource)=%%">

            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="floatingInput" name="first_name" value="%%=v(@first_name)=%%" required>
              <label for="floatingInput">First Name</label>
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>
  
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="floatingInput" name="last_name" value="%%=v(@last_name)=%%" required>
              <label for="floatingInput">Last Name</label>
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>
          
            <div class="form-floating mb-3">
            <input type="email" class="form-control" id="floatingInput" name="email" value="%%=v(@email)=%%" required>
            <label for="floatingInput">Email address</label>
            <div class="valid-feedback">
              Looks good!
            </div>
          </div>

          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="floatingInput" name="Agent_Code" value="%%=v(@Agent_Code)=%%" required>
            <label for="floatingInput">Agent Code</label>
            <div class="valid-feedback">
              Looks good!
            </div>
          </div>

          <button class="w-100 btn btn-lg btn-primary" type="submit">Sign up</button>
          
          %%[ ELSE ]%%
            %%[ IF NOT EMPTY(@ok) THEN ]%%
            <fieldset>
                <legend>Message</legend>
                Thank you for subscribing :)
            </fieldset>
            %%[ ENDIF ]%%
            %%[ IF NOT EMPTY(@error) THEN ]%%
            <fieldset>
                <legend>Message</legend>
                Something went wrong :(
            </fieldset>
            %%[ ENDIF ]%%
          %%[ ENDIF ]%%
          
          <hr class="my-4">
          
          <small class="text-muted">By clicking Sign up, you agree to the terms of use.</small>
        </form>
      </div>
    </div>
  </div>

  <div class="b-example-divider"></div>
</main>

%%[ IF NOT EMPTY(@message) AND NOT EMPTY(@error) THEN ]%%
  <script>
      console.error(`%%=v(@message)=%%`);
  </script>
%%[ ENDIF ]%%

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
<script>
// Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()
</script>    
  </body>
</html>
